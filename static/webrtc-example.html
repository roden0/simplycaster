<!DOCTYPE html>\n<html lang=\"en\">\n<head>\n    <meta charset=\"UTF-8\">\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\n    <title>WebRTC Room Client Example</title>\n    <style>\n        body {\n            font-family: Arial, sans-serif;\n            max-width: 800px;\n            margin: 0 auto;\n            padding: 20px;\n        }\n        .container {\n            background: #f5f5f5;\n            padding: 20px;\n            border-radius: 8px;\n            margin-bottom: 20px;\n        }\n        .controls {\n            display: flex;\n            gap: 10px;\n            margin-bottom: 20px;\n            flex-wrap: wrap;\n        }\n        button {\n            padding: 10px 20px;\n            border: none;\n            border-radius: 4px;\n            cursor: pointer;\n        }\n        .primary { background: #007bff; color: white; }\n        .success { background: #28a745; color: white; }\n        .danger { background: #dc3545; color: white; }\n        button:disabled {\n            opacity: 0.6;\n            cursor: not-allowed;\n        }\n        .status {\n            padding: 10px;\n            border-radius: 4px;\n            margin-bottom: 10px;\n        }\n        .connected { background: #d4edda; color: #155724; }\n        .disconnected { background: #f8d7da; color: #721c24; }\n        .log {\n            background: white;\n            border: 1px solid #ddd;\n            border-radius: 4px;\n            padding: 10px;\n            height: 200px;\n            overflow-y: auto;\n            font-family: monospace;\n            font-size: 12px;\n            white-space: pre-wrap;\n        }\n    </style>\n</head>\n<body>\n    <h1>WebRTC Room Client Example</h1>\n    \n    <div class=\"container\">\n        <div id=\"status\" class=\"status disconnected\">\n            Status: Disconnected\n        </div>\n        \n        <div class=\"controls\">\n            <button id=\"connectBtn\" class=\"primary\">Connect to Room</button>\n            <button id=\"disconnectBtn\" class=\"danger\" disabled>Disconnect</button>\n            <button id=\"startAudioBtn\" class=\"success\" disabled>Start Audio</button>\n            <button id=\"stopAudioBtn\" class=\"danger\" disabled>Stop Audio</button>\n        </div>\n        \n        <div>\n            <strong>Participants:</strong>\n            <div id=\"participantsList\">None</div>\n        </div>\n    </div>\n    \n    <div class=\"container\">\n        <h3>Event Log</h3>\n        <div id=\"log\" class=\"log\"></div>\n    </div>\n\n    <script type=\"module\">\n        // Example usage of WebRTCRoomClient\n        // In a real application, you would import this from your module system\n        \n        class WebRTCRoomDemo {\n            constructor() {\n                this.roomClient = null;\n                this.isConnected = false;\n                this.hasAudio = false;\n                \n                this.initializeUI();\n            }\n            \n            initializeUI() {\n                document.getElementById('connectBtn').addEventListener('click', () => this.connect());\n                document.getElementById('disconnectBtn').addEventListener('click', () => this.disconnect());\n                document.getElementById('startAudioBtn').addEventListener('click', () => this.startAudio());\n                document.getElementById('stopAudioBtn').addEventListener('click', () => this.stopAudio());\n            }\n            \n            log(message) {\n                const logElement = document.getElementById('log');\n                const timestamp = new Date().toLocaleTimeString();\n                logElement.textContent += `[${timestamp}] ${message}\\n`;\n                logElement.scrollTop = logElement.scrollHeight;\n            }\n            \n            updateStatus(status, className) {\n                const statusElement = document.getElementById('status');\n                statusElement.textContent = `Status: ${status}`;\n                statusElement.className = `status ${className}`;\n            }\n            \n            updateButtons() {\n                document.getElementById('connectBtn').disabled = this.isConnected;\n                document.getElementById('disconnectBtn').disabled = !this.isConnected;\n                document.getElementById('startAudioBtn').disabled = !this.isConnected || this.hasAudio;\n                document.getElementById('stopAudioBtn').disabled = !this.isConnected || !this.hasAudio;\n            }\n            \n            updateParticipants(participants) {\n                const participantsElement = document.getElementById('participantsList');\n                if (participants.length === 0) {\n                    participantsElement.textContent = 'None';\n                } else {\n                    participantsElement.textContent = participants.map(p => p.name).join(', ');\n                }\n            }\n            \n            async connect() {\n                try {\n                    this.log('Creating WebRTC room client...');\n                    \n                    // In a real app, you would import WebRTCRoomClient\n                    // const { WebRTCRoomClient } = await import('/lib/webrtc/index.ts');\n                    \n                    // For demo purposes, we'll simulate the client\n                    this.roomClient = {\n                        connect: () => Promise.resolve(),\n                        disconnect: () => Promise.resolve(),\n                        startAudio: () => Promise.resolve({ id: 'demo-stream' }),\n                        stopAllMedia: () => Promise.resolve(),\n                        on: (event, callback) => {\n                            // Simulate events\n                            if (event === 'connected') {\n                                setTimeout(callback, 100);\n                            }\n                        },\n                        getRoomStats: () => ({\n                            isConnected: this.isConnected,\n                            participantCount: 1\n                        }),\n                        getParticipants: () => [{\n                            id: 'demo-user',\n                            name: 'Demo User',\n                            type: 'host',\n                            isConnected: true\n                        }]\n                    };\n                    \n                    // Setup event listeners\n                    this.setupEventListeners();\n                    \n                    this.log('Connecting to room...');\n                    await this.roomClient.connect();\n                    \n                } catch (error) {\n                    this.log(`Connection failed: ${error.message}`);\n                    this.updateStatus('Connection Failed', 'disconnected');\n                }\n            }\n            \n            setupEventListeners() {\n                if (!this.roomClient) return;\n                \n                this.roomClient.on('connected', () => {\n                    this.log('Connected to room successfully');\n                    this.isConnected = true;\n                    this.updateStatus('Connected', 'connected');\n                    this.updateButtons();\n                    this.updateParticipants(this.roomClient.getParticipants());\n                });\n                \n                this.roomClient.on('disconnected', (reason) => {\n                    this.log(`Disconnected: ${reason}`);\n                    this.isConnected = false;\n                    this.hasAudio = false;\n                    this.updateStatus('Disconnected', 'disconnected');\n                    this.updateButtons();\n                    this.updateParticipants([]);\n                });\n                \n                this.roomClient.on('participant-joined', (participant) => {\n                    this.log(`Participant joined: ${participant.name}`);\n                    this.updateParticipants(this.roomClient.getParticipants());\n                });\n                \n                this.roomClient.on('participant-left', (participant) => {\n                    this.log(`Participant left: ${participant.name}`);\n                    this.updateParticipants(this.roomClient.getParticipants());\n                });\n                \n                this.roomClient.on('local-stream-started', (stream, type) => {\n                    this.log(`Local ${type} stream started: ${stream.id}`);\n                    if (type === 'audio') {\n                        this.hasAudio = true;\n                        this.updateButtons();\n                    }\n                });\n                \n                this.roomClient.on('local-stream-stopped', (streamId, type) => {\n                    this.log(`Local ${type} stream stopped: ${streamId}`);\n                    if (type === 'audio') {\n                        this.hasAudio = false;\n                        this.updateButtons();\n                    }\n                });\n                \n                this.roomClient.on('remote-stream-added', (stream, participantId) => {\n                    this.log(`Remote stream added from ${participantId}: ${stream.id}`);\n                });\n                \n                this.roomClient.on('error', (error, context) => {\n                    this.log(`Error (${context}): ${error.message}`);\n                });\n                \n                this.roomClient.on('media-permission-denied', (type) => {\n                    this.log(`Media permission denied for ${type}`);\n                });\n            }\n            \n            async disconnect() {\n                if (!this.roomClient) return;\n                \n                try {\n                    this.log('Disconnecting from room...');\n                    await this.roomClient.disconnect();\n                    this.roomClient = null;\n                } catch (error) {\n                    this.log(`Disconnect failed: ${error.message}`);\n                }\n            }\n            \n            async startAudio() {\n                if (!this.roomClient) return;\n                \n                try {\n                    this.log('Starting audio stream...');\n                    const stream = await this.roomClient.startAudio();\n                    this.log(`Audio stream started: ${stream.id}`);\n                } catch (error) {\n                    this.log(`Failed to start audio: ${error.message}`);\n                }\n            }\n            \n            async stopAudio() {\n                if (!this.roomClient) return;\n                \n                try {\n                    this.log('Stopping audio stream...');\n                    await this.roomClient.stopAllMedia();\n                    this.log('Audio stream stopped');\n                } catch (error) {\n                    this.log(`Failed to stop audio: ${error.message}`);\n                }\n            }\n        }\n        \n        // Initialize the demo\n        const demo = new WebRTCRoomDemo();\n        \n        // Log initial message\n        demo.log('WebRTC Room Client Demo initialized');\n        demo.log('This is a demonstration of the WebRTC room client API');\n        demo.log('Click \"Connect to Room\" to start');\n    </script>\n</body>\n</html>"